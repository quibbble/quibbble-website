import { useState } from 'react';
import { useSpring, animated } from '@react-spring/web'
import { interpolate } from "flubber";

const box = [
    "M0 200C0 213.255 10.7452 224 24 224H136C149.255 224 160 213.255 160 200V192C160 174.327 174.327 160 192 160H200C213.255 160 224 149.255 224 136V24C224 10.7452 213.255 0 200 0H24C10.7452 0 0 10.7452 0 24V200ZM200.012 224C200.008 224 200.004 224 200 224H192C192.005 224 192.009 224 192.014 224H200.012Z",
    "M0 212C0 218.627 5.37258 224 12 224H148C154.627 224 160 218.627 160 212V192C160 174.327 174.327 160 192 160H212C218.627 160 224 154.627 224 148V12C224 5.37257 218.627 0 212 0H12C5.37258 0 0 5.37259 0 12V212ZM212.008 224C212.006 224 212.003 224 212 224H192C192.005 224 192.009 224 192.014 224H212.008Z"                        
]
const corner = interpolate(
    "M206.71,221.86h0c-7.14,2.96-14.81,2.74-21.42,0-6.62-2.74-12.19-8.01-15.15-15.15h0c-2.96-7.14-2.74-14.81,0-21.42s8.01-12.19,15.15-15.15h0c7.14-2.96,14.81-2.74,21.42,0,6.62,2.74,12.19,8.01,15.15,15.15h0c2.96,7.14,2.74,14.81,0,21.42-2.74,6.62-8.01,12.19-15.15,15.15Z",
    "M220.5,168h-31.5c-11.6,0-21,9.4-21,21v31.5c0,1.93,1.57,3.5,3.5,3.5h49c1.93,0,3.5-1.57,3.5-3.5v-49c0-1.93-1.57-3.5-3.5-3.5Z",
    { maxSegmentLength: 0.5 }
)
const arrow = [
    "M206.718 186.991C206.614 186.858 206.495 186.738 206.362 186.635L206.276 186.55C206.124 186.399 205.945 186.278 205.749 186.193C205.53 186.092 205.292 186.039 205.051 186.037L190.802 186.037C190.265 186.037 189.75 186.25 189.371 186.629C188.991 187.009 188.778 187.523 188.778 188.06C188.778 188.597 188.991 189.111 189.371 189.491C189.75 189.87 190.265 190.083 190.802 190.083L200.078 189.898L186.413 203.563C186.035 203.941 185.823 204.453 185.823 204.988C185.823 205.522 186.035 206.035 186.413 206.413C186.791 206.791 187.303 207.003 187.838 207.003C188.372 207.003 188.885 206.791 189.263 206.413L202.928 192.748L202.913 202.138C202.912 202.404 202.964 202.668 203.065 202.914C203.166 203.16 203.315 203.383 203.504 203.571C203.692 203.759 203.915 203.908 204.161 204.01C204.407 204.111 204.671 204.163 204.937 204.161C205.203 204.163 205.466 204.111 205.712 204.01C205.958 203.908 206.182 203.759 206.37 203.571C206.558 203.383 206.707 203.16 206.808 202.914C206.91 202.668 206.961 202.404 206.96 202.138L206.96 187.889C206.95 187.649 206.897 187.412 206.803 187.191C206.787 187.12 206.758 187.052 206.718 186.991Z",
    "M210.718 182.991C210.614 182.858 210.495 182.738 210.362 182.635L210.276 182.55C210.124 182.399 209.945 182.278 209.749 182.193C209.53 182.092 209.292 182.039 209.051 182.037L194.802 182.037C194.265 182.037 193.75 182.25 193.371 182.629C192.991 183.009 192.778 183.523 192.778 184.06C192.778 184.597 192.991 185.111 193.371 185.491C193.75 185.87 194.265 186.083 194.802 186.083L204.078 185.898L190.413 199.563C190.035 199.941 189.823 200.453 189.823 200.988C189.823 201.522 190.035 202.035 190.413 202.413C190.791 202.791 191.303 203.003 191.838 203.003C192.372 203.003 192.885 202.791 193.263 202.413L206.928 188.748L206.913 198.138C206.912 198.404 206.964 198.668 207.065 198.914C207.166 199.16 207.315 199.383 207.504 199.571C207.692 199.759 207.915 199.908 208.161 200.01C208.407 200.111 208.671 200.163 208.937 200.161C209.203 200.163 209.466 200.111 209.712 200.01C209.958 199.908 210.182 199.759 210.37 199.571C210.558 199.383 210.707 199.16 210.808 198.914C210.91 198.668 210.961 198.404 210.96 198.138L210.96 183.889C210.95 183.649 210.897 183.412 210.803 183.191C210.787 183.12 210.758 183.052 210.718 182.991Z"
]

export function Animation({color}) {
    const [active, setActive] = useState(false)

    const { x } = useSpring({ 
        config: {
            duration: 250,
            clamp: true,
        },
        x: active ? 1 : 0 
    });

    return (
        <div className='w-full' onMouseEnter={() => setActive(true)} onMouseLeave={() => setActive(false)}> 
            <svg className="fill-dark-900 drop-shadow-md" 
                width="100%" height="100%" 
                viewBox="0 0 224 224" >
                <animated.path 
                    className={`${active ? 'fill-dark-600' : 'fill-dark-900'}`}
                    fillRule="evenodd" 
                    clipRule="evenodd"
                    d={x.to({
                        range: [0, 1],
                        output: box
                    })} />
                <animated.path
                    className={`fill-${color} ${active ? `group-hover:fill-dark-600` : ''} transition ease-in-out duration-200`}
                    d={x.to(corner)} />
                <animated.path className={`fill-white ${active ? `group-hover:fill-${color}` : ''} transition ease-in-out duration-200`} 
                    d={x.to({
                        range: [0, 1],
                        output: arrow,
                    })} />
            </svg>
        </div>
    )
}
